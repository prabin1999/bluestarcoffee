!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="46a1e905-8297-4bdc-8921-934887722ea9",e._sentryDebugIdIdentifier="sentry-dbid-46a1e905-8297-4bdc-8921-934887722ea9")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9555],{64979:function(e,t,r){r.d(t,{$m:function(){return T},C0:function(){return b},D:function(){return C},EQ:function(){return _},F4:function(){return I},H$:function(){return v},IS:function(){return P},Iu:function(){return s},Kq:function(){return f},Nc:function(){return k},OI:function(){return c},PF:function(){return n},RJ:function(){return N},S3:function(){return l},Vj:function(){return m},W$:function(){return x},YT:function(){return u},Zq:function(){return O},Zv:function(){return h},_R:function(){return S},cm:function(){return o},e5:function(){return d},f3:function(){return w},os:function(){return a},p3:function(){return i},u4:function(){return y},vl:function(){return R},wK:function(){return g},wj:function(){return W},wy:function(){return p},xQ:function(){return E}}),r(12976).p;let o="download_after_removing_bg",n="copy_after_removing_bg",i="edit_after_removing_bg",a="ai_tool_removebg",l="ai_tool_expand",u="ai_tool_expand_after_download",c="ai_tool_expand_carousel",s="ai_tool_expand_removebg",d="ai_tool_expand_download_popover",_="ai_tool_retouch",f="ai_tool_retouch_download_popover",p="ai_tool_retouch_after_download",m="ai_tool_reimagine",g="ai_tool_reimagine_download_popover",w="ai_tool_reimagine_after_download",v="ai_tool_upscaler",h="ai_tool_replacebg",b="ai_tool_all",y="ai_tool_all_thumbnail",k="ai_tool_adjust",x="ai_tool_video",P="ai_tool_generate_style_ref",I="ai_tool_generate_prompt",T="ai_tool_assistant",N="edit_tools_onboarding_v2",R="edit_tools_onboarding",E=["replacebg","video","generatePrompt","styleReference"],O=["tint","grain","presets"],S=2e3,W=15,C="resource_detail"},32671:function(e,t,r){r.d(t,{a:function(){return b}});var o=r(52983),n=r(33843),i=r(43186),a=r(33247),l=r(15082),u=r(64979),c=r(94608),s=r(52753);let d={retouch:{resource_detail:u.EQ,download_popover:u.Kq,attribution:u.wy},expand:{resource_detail:u.S3,attribution:u.YT,carousel:u.OI,removebg:u.Iu,download_popover:u.e5},reimagine:{resource_detail:u.Vj,download_popover:u.wK,attribution:u.f3,resource_detail_hover:u.Vj},adjust:{resource_detail:u.Nc,resource_detail_hover:u.Nc},replacebg:{resource_detail:u.Zv},video:{resource_detail:u.W$,resource_detail_hover:u.W$},assistant:{resource_detail:u.$m},generatePrompt:{resource_detail:u.F4},styleReference:{resource_detail:u.IS},workflow:{resource_detail:u.$m}},_={createSocialPostWithText:"workflow_create_post",createSocialPostWithoutText:"workflow_create_post",createPoster:"workflow_create_poster",mixImages:"workflow_mix_images",applyPromo:"workflow_apply_promo"},f=(e,t)=>{var r;return e?"workflow"===e&&(0,n.BP)(t)?_[t]:null===(r=d[e])||void 0===r?void 0:r.modifier:void 0},p=e=>{var t,r;let{tool:n,subOption:u,resourceData:_,location:p="resource_detail"}=e,{id:m,name:g,author:w,type:v,isAIGenerated:h,premium:b,url:y,preview:k}=_,x=(0,a.R)(),P="resource_detail"===p?(0,s.d)(b,n,u):p,I=x({...(0,c.W)(n,u),type:v,authorName:w.name,isPremium:b,isAIGenerated:h,eventName:"thumbnail_ai_tools"===p?"ai_gen__thumbnail":"ai_gen"}),{handleDownload:T}=(0,l.i)({resource:{id:m,name:g,author:w,premium:b,regularType:v,isAIGenerated:h,url:y,preview:k},action:null!==(r=null===(t=d[null!=n?n:"all"])||void 0===t?void 0:t[p])&&void 0!==r?r:"download",modifier:f(n,u),showAttributionModal:!1,location:P,checkoutQueryParams:I}),N=(0,i.J)();return(0,o.useCallback)(async(e,t)=>{let r=await T(e,t);if(!(null==r?void 0:r.signedUrl))throw Error("Failed to download image");return N(),r.signedUrl},[T,N])},m={styleReference:"ai-image-generator",generatePrompt:"ai-image-generator",video:"ai-video-generator",assistant:"assistant",adjust:"image-editor",reimagine:"reimagine",expand:"image-editor",retouch:"image-editor",replacebg:"image-editor"},g={video:"startFrame",generatePrompt:"image_prompt",styleReference:"image_style_ref"},w=["createPoster","mixImages","applyPromo"],v=(e,t)=>{var r;return"workflow"===e&&(0,n.BP)(t)&&w.includes(t)?null:null!==(r=g[e])&&void 0!==r?r:"image"},h={replacebg:"background"},b=e=>{let{resourceData:t,imageUrl:r,tool:n,location:i,subOption:a}=e,{preview:{url:l},name:u,type:c,author:{name:s},premium:d,isAIGenerated:_}=t,f="/pikaso",m=x(n,a),g=p({tool:n,subOption:a,location:i,resourceData:t});return(0,o.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null!=r?r:l,o=await g(t);r||(t="".concat(o).concat(o.includes("?")?"&":"?","w=2000"));let p=new URLSearchParams;if(e&&Object.entries(e).forEach(e=>{let[t,r]=e;r&&p.set(t,r)}),n){var w;p.set("tool",null!==(w=k(n,a))&&void 0!==w?w:n)}let h=v(n,a);h&&p.set(h,t),p.set("title",u),p.set("location",null!=i?i:"resource_detail"),p.set("item_type",c),p.set("item_author",s),p.set("is_premium_item",d?"true":"false"),p.set("is_ai_generated",_?"true":"false");let b=window.open("about:blank");b?b.location.href="".concat(f,"/").concat(m,"?").concat(p):document.location.href="".concat(f,"/").concat(m,"?").concat(p)},[s,g,l,r,_,i,u,d,a,n,m,c])},y={createSocialPostWithText:{url:"assistant"},createSocialPostWithoutText:{url:"image-editor",tool:"expand"},createPoster:{url:"assistant"},mixImages:{url:"assistant"},applyPromo:{url:"assistant"}},k=(e,t)=>{var r;return"workflow"===e&&(0,n.BP)(t)?y[t].tool:null!==(r=h[e])&&void 0!==r?r:e},x=(e,t)=>"workflow"===e&&(0,n.BP)(t)?y[t].url:m[e]},42997:function(e,t,r){r.d(t,{i:function(){return d}});var o=r(41937),n=r(65122),i=r(90312),a=r(85229),l=r(52983),u=r(65724),c=r(64979),s=r(35845);let d=e=>{let{tool:t,subOption:r,resourceData:c,checkoutQueryParams:d}=e,f=(0,o.I)(),p=(0,s.e)(t),m=(0,n.e)(),{setLoginCookies:g,signUpUrl:w}=(0,i.e)(),v=(0,u.W)(c.id),h=(null==c?void 0:c.premium)||!1,b=m||!h,{isUserWinback:y,showWinbackModal:k}=(0,a.l)();return(0,l.useCallback)(()=>y?(k(),!0):(!b||!p)&&(f&&b&&!_(t,r)?(g(),window.location.href=w):v({resourceData:{name:null==c?void 0:c.name,mediaUrl:c.preview.url,mediaWidth:c.preview.width,mediaHeight:c.preview.height,resourceType:"regular"},checkoutQueryParams:d}),!0),[y,b,p,f,t,r,v,null==c?void 0:c.name,c.preview.url,c.preview.width,c.preview.height,d,k,g,w])},_=(e,t)=>c.xQ.includes(e)||t&&c.Zq.includes(t)},35845:function(e,t,r){r.d(t,{C:function(){return d},e:function(){return c}});var o=r(11645),n=r(41937),i=r(2394),a=r(18444),l=r(8147),u=r(52983);let c=e=>d()(e),s={removebg:"freepik-tools-integration-remove-bg",retouch:"pikaso-edition",expand:"pikaso-edition",reimagine:"pikaso-reimagine",replacebg:"pikaso-bg-replacer",video:"pikaso-video-kling",generatePrompt:"pikaso-tti",styleReference:"pikaso-tti",assistant:"pikaso-edition"},d=()=>{let e=(0,l.H)(),t=(0,n.I)(),r=(0,a.w)(),c=(0,i.E)(),d=(0,o.u)(),_=null==e?void 0:e.permissions;return(0,u.useCallback)(e=>{let o=s[e];if(c)return!o||d(o);if(!_)return!1;let{canUseIA:n}=_,i=n&&!t,a=i&&!r;return({replacebg:i&&a,retouch:i,removebg:i,expand:i,reimagine:i,adjust:!t,video:i&&a,generatePrompt:i&&a,styleReference:i&&a,assistant:i,workflow:i})[e]},[c,_,t,r,d])}},33843:function(e,t,r){r.d(t,{BP:function(){return s},Us:function(){return n},Zq:function(){return u},bE:function(){return a},yS:function(){return _}});let o=["pixel-art","illustration","surreal","comic","fantasy","anime","digital-art","vintage","photo","all-styles"],n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.includes(e)},i=["1:1","1:2","2:1","2:3","3:4","4:5","9:16","3:2","4:3","16:9","custom"],a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i.includes(e)},l=["crop","light","color","tint","grain","rotate","presets"],u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l.includes(e)},c=["createSocialPostWithText","createSocialPostWithoutText","createPoster","mixImages","applyPromo"],s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return c.includes(e)},d=["remove","insert"],_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d.includes(e)}},94608:function(e,t,r){r.d(t,{W:function(){return a}});var o=r(33843);let n={video:"ai_video_generator",adjust:"adjust",reimagine:"reimagine",expand:"expand",removebg:"background",retouch:"retouch",replacebg:"background",generatePrompt:"ai_image_generator",styleReference:"ai_image_generator",assistant:"assistant",workflow:"assistant"},i=(e,t)=>{if("removebg"===e)return"remove";if("replacebg"===e)return"replace";if("reimagine"===e&&(0,o.Us)(t))return"all-styles"===t?"style":"style__".concat(t);if("expand"===e&&(0,o.bE)(t))return"aspect_ratio__".concat(t);if("adjust"===e&&(0,o.Zq)(t)||"retouch"===e&&(0,o.yS)(t))return t;if("generatePrompt"===e)return"prompt__image_reference";if("styleReference"===e)return"style__image_reference";if("workflow"===e&&(0,o.BP)(t)){if("createSocialPostWithText"===t||"createSocialPostWithoutText"===t)return"workflow__create_post";if("createPoster"===t)return"workflow__create_poster";if("mixImages"===t)return"workflow__mix_images";if("applyPromo"===t)return"workflow__apply_promo";throw Error("Invalid subOption: ".concat(t))}return"ai_gen"},a=(e,t)=>({tool:n[e],eventName:i(e,t),businessLine:"ai_tools,content"})},52753:function(e,t,r){r.d(t,{d:function(){return o}});let o=(e,t,r)=>"resource_detail".concat(e?"":"_free","_").concat(null!=t?t:"ai_tools").concat(r?"_".concat(r):"")},15715:function(e,t,r){r.d(t,{H:function(){return n}});let o=e=>{let{resource:t,file:r,option:o,size:n,action:i,walletId:a,locale:l,modifier:u}=e,c=new URLSearchParams;return c.set("resource","".concat(t)),r&&o?(c.set("file",r),c.set("option","".concat(o))):n&&c.set("size","".concat(n)),i&&c.set("action",i),a&&c.set("walletId",a),c.set("locale",l),u&&c.set("modifier",u),c.toString()},n=async e=>{let t=o(e),r=await fetch("/api/regular/download?".concat(t));return r.ok?{success:!0,data:await r.json()}:429===r.status?{success:!1,data:"DOWNLOAD_LIMIT_REACHED",metadata:"/download-limit"}:401===r.status||403===r.status||405===r.status?{success:!1,data:"AUTHENTICATION_ERROR"}:404===r.status?{success:!1,data:"NOT_FOUND"}:{success:!1,data:"UNKNOWN_ERROR"}}},15082:function(e,t,r){r.d(t,{i:function(){return S}});var o=r(72234),n=r(9324),i=r(68147),a=r(85229),l=r(87420),u=r(61158),c=r(52983),s=r(52240),d=r(35576),_=r(7526);let f=(e,t)=>t||("photo"===e?"jpg":"zip");var p=r(49737);r(97458);let m=(0,c.createContext)(null),g=()=>(0,c.useContext)(m)||{shouldTrackingLog:!0};var w=r(15715),v=r(32509),h=r(59916),b=r(72118),y=r(1850),k=r(64979),x=r(56879);let P=y.z.enum(["download","copy","edit","prompt","preview","remove_background","remove_background_edit","ai_video",k.cm,k.PF,k.p3,k.EQ,k.Kq,k.Vj,k.wK,k.os,k.S3,k.H$,k.C0,k.u4,k.YT,k.OI,k.Iu,k.e5,k.f3,k.wy,k.Nc,k.Zv,k.W$,k.$m,k.F4,k.IS]),I=y.z.enum(["workflow_create_post","workflow_create_poster","workflow_mix_images","workflow_apply_promo"]);y.z.object({resource:y.z.coerce.number(),file:x.ru.optional(),option:y.z.coerce.number().optional(),size:y.z.coerce.number().optional(),action:P.optional(),modifier:I.optional(),walletId:y.z.string().nullable().optional(),locale:y.z.string()}),y.z.object({data:y.z.object({filename:y.z.string(),url:y.z.string(),prompt:y.z.string().optional(),signed_url:y.z.string().optional()})}).transform(e=>{let{data:t}=e;return t}).transform(e=>{let{signed_url:t,...r}=e;return{...r,signedUrl:t}});let T=y.z.array(y.z.string()),N=new Date(new Date().getTime()+48e4),R=b.Z.withConverter({write:e=>e}),E=e=>{try{let t=R.get(e);if(!t)return[];return T.parse(JSON.parse(t))}catch(e){return[]}},O=()=>{let e=(0,i.I)(),t=(0,h.b)();return(0,c.useCallback)(r=>{if(!e)return;let o="".concat("ck_items_").concat(e),n=E(o),i="".concat(r);if(!n.includes(i)){let e=JSON.stringify([...n,i]);R.set(o,e,{path:"/",domain:t,expires:N})}},[e,t])},S=e=>{let{resource:t,file:r,action:m="download",modifier:h,location:b="resource_detail",option:y,size:k,showAttributionModal:x=!0,handleError:P,checkoutQueryParams:I}=e,{id:T,name:N,author:R,premium:E,regularType:S,isAIGenerated:W,url:C}=t,[z,D]=(0,c.useState)(!1),{isUserWinback:j,showWinbackModal:U}=(0,a.l)(),{showAttribution:H}=(0,p.tc)(),$=O(),A=(0,v.b)({resource:t,location:b}),F=(0,d.mS)(),{shouldTrackingLog:L}=g(),{showDeviceBlockedModal:K,isDeviceBlocked:Z}=(0,n.qx)(),q=(0,o.Lh)(),J=(0,i.I)(),B=(0,l.ZK)(),Q=(0,s.TH)({file_extension:f(S,r),file_name:N,file_id:T,license:E?"premium":"free",resolution:k?_.w8[k]:"original",style:"na",author_name:R.name,category:W?"ai_image":S,action:"prompt"===m?"view_prompt":m,location:b,url_link:C}),V=(0,c.useCallback)(e=>{if(P){P(e);return}"prompt"!==m&&A(e,I)},[P,m,A,I]);return{handleDownload:(0,c.useCallback)(async(e,t)=>{if(Z){K();return}if(j){U();return}D(!0),q||u.uT("WARNING: User ".concat(J," has no wallet_id"),"warning"),L&&F({resourceId:T,isResourcePremium:E,resourceType:S,downloadType:m,fileType:S,variant:b});let o=await (0,w.H)({resource:T,size:k?2e3:void 0,action:m,modifier:h,file:r,option:y,walletId:q,locale:B});if(o.success)return x&&H&&H(),D(!1),$(T),Q({externalUrl:null!=e?e:C,setting:t}),o.data;V(o),D(!1)},[Z,j,q,T,k,m,r,y,B,V,K,U,J,x,H,$,L,Q,C,F,E,S,b]),isDownloading:z}}},32509:function(e,t,r){r.d(t,{b:function(){return l}});var o=r(19170),n=r(10893),i=r(52983),a=r(65724);let l=e=>{var t;let{location:r,resource:l}=null!=e?e:{},{t:u}=(0,n.$G)("error"),{openToast:c}=(0,o.x_)(),s=(0,a.W)(null!==(t=null==l?void 0:l.id)&&void 0!==t?t:0,"",r);return(0,i.useCallback)((e,t)=>{if("DOWNLOAD_LIMIT_REACHED"===e.data&&l){s({resourceData:{name:l.name,mediaUrl:l.preview.url,mediaWidth:l.preview.width,mediaHeight:l.preview.height,resourceType:"regular"},checkoutQueryParams:t,modalType:"downloadLimit",origin:"download_limit"});return}if("AUTHENTICATION_ERROR"===e.data){window.location.href="/oauth-logout";return}"NOT_FOUND"===e.data&&c({type:"danger",message:u("notFound")}),"UNKNOWN_ERROR"===e.data&&c({type:"danger",message:u("unknown")})},[s,c,l,u])}},64237:function(e,t,r){r.d(t,{y:function(){return n}});var o=r(5704);let n=e=>{let{isEditableInMockup:t,isEditableInWepik:r}=e,n=(0,o.Jn)("type");return"illustration"===n?"illustration":t||"mockup"===n?"mockup":r||"template"===n?"template":void 0}},11645:function(e,t,r){r.d(t,{u:function(){return i}});var o=r(52983),n=r(8147);let i=()=>{let e=(0,n.H)();return(0,o.useCallback)(t=>{if(!e)return!0;try{let r=e.disabledPermissionsTools;if(!r)return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:"Disabled permissions tools not found"})),!0;return!(t in r)}catch(r){return console.error(JSON.stringify({fatal_error:"Error checking tool permission for ".concat(t," from wallet ").concat(e.walletId),error:r})),!0}},[e])}},2394:function(e,t,r){r.d(t,{E:function(){return n}});var o=r(8147);let n=()=>{let e=(0,o.H)();return!!(null==e?void 0:e.profile.isEnterprise)}}}]);